# BerthCare Local Development Environment Variables
# Copy this file to .env and update values as needed

# =============================================================================
# Application Configuration
# =============================================================================
NODE_ENV=development
PORT=3000
API_URL=http://localhost:3000
DEFAULT_VISIT_DURATION_MINUTES=60

# =============================================================================
# PostgreSQL Database Configuration
# =============================================================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=berthcare_dev
POSTGRES_USER=berthcare
POSTGRES_PASSWORD=berthcare_dev_password
POSTGRES_HOST_AUTH_METHOD=scram-sha-256
POSTGRES_INITDB_ARGS=--auth-host=scram-sha-256

# Database Connection String
DATABASE_URL=postgresql://berthcare:berthcare_dev_password@localhost:5432/berthcare_dev

# Database Pool Configuration
DB_POOL_MIN=2
DB_POOL_MAX=20
DB_IDLE_TIMEOUT_MS=30000
DB_CONNECTION_TIMEOUT_MS=2000

# Read Replica (Optional)
DATABASE_REPLICA_URL=
DB_REPLICA_POOL_MAX=10

# =============================================================================
# Redis Cache Configuration
# =============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=berthcare_redis_password
REDIS_DB=0
REDIS_TLS_ENABLED=false

# Redis Connection String
REDIS_URL=redis://:berthcare_redis_password@localhost:6379/0

# Cache TTL Configuration (in seconds)
CACHE_TTL_SHORT=300
CACHE_TTL_MEDIUM=900
CACHE_TTL_LONG=3600

# =============================================================================
# AWS S3 / LocalStack Configuration
# =============================================================================
AWS_REGION=ca-central-1
AWS_ACCESS_KEY_ID=test
AWS_SECRET_ACCESS_KEY=test
AWS_ENDPOINT=http://localhost:4566

# S3 Bucket Names
S3_BUCKET_PHOTOS=berthcare-photos-dev
S3_BUCKET_DOCUMENTS=berthcare-documents-dev
S3_BUCKET_SIGNATURES=berthcare-signatures-dev

# S3 Configuration
S3_FORCE_PATH_STYLE=true
S3_SIGNATURE_VERSION=v4

# =============================================================================
# JWT Authentication Configuration
# =============================================================================
# RS256 Algorithm (Asymmetric Encryption)
# Generate keys with: openssl genrsa -out private_key.pem 2048
#                     openssl rsa -in private_key.pem -pubout -out public_key.pem
# For base64 encoding: base64:$(cat private_key.pem | base64)

# JWT Private Key (for signing tokens)
# Production: Store in AWS Secrets Manager
# Development: Use environment variable or base64-encoded key
JWT_PRIVATE_KEY=your-rsa-private-key-here

# Optional: Signing key identifier (appears in JWT kid header)
JWT_KEY_ID=development-key

# Optional: Additional public keys for rotated tokens (JSON string)
# Example: { "2024-key": { "publicKey": "-----BEGIN PUBLIC KEY-----..." } }
JWT_PUBLIC_KEY_SET={}

# Optional: Inline key set override (JSON with activeKid + keys)
JWT_KEYS_JSON=

# JWT Public Key (for verifying tokens)
# Can be safely distributed to services that need to verify tokens
JWT_PUBLIC_KEY=your-rsa-public-key-here

# Optional: AWS Secrets Manager ARN storing JWT key set
JWT_KEYS_SECRET_ARN=

# Token Expiry Times
JWT_ACCESS_TOKEN_EXPIRY=1h
JWT_REFRESH_TOKEN_EXPIRY=30d

# =============================================================================
# Google Maps API Configuration
# =============================================================================
GOOGLE_MAPS_API_KEY=your_google_maps_api_key_here
GOOGLE_MAPS_GEOCODING_CACHE_TTL=86400

# =============================================================================
# Twilio Configuration (Voice & SMS)
# =============================================================================
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_VOICE_URL=http://localhost:3000/api/twilio/voice
TWILIO_SMS_URL=http://localhost:3000/api/twilio/sms

# =============================================================================
# Expo Push Notifications Configuration
# =============================================================================
EXPO_ACCESS_TOKEN=your_expo_access_token

# =============================================================================
# Security Configuration
# =============================================================================
# CORS Configuration
CORS_ORIGIN=http://localhost:19006,exp://localhost:19000
CORS_CREDENTIALS=true

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Session Configuration
SESSION_SECRET=your-super-secret-session-key-change-this-in-production
SESSION_MAX_AGE=86400000



# =============================================================================
# LocalStack Configuration
# =============================================================================
LOCALSTACK_SERVICES=s3
LOCALSTACK_PORT=4566
LOCALSTACK_PORT_EXT=4510-4559
LOCALSTACK_DEBUG=0

# =============================================================================
# Development Tools (Optional)
# =============================================================================
# PgAdmin
PGADMIN_EMAIL=admin@berthcare.local
PGADMIN_PASSWORD=admin
PGADMIN_PORT=5050

# Redis Commander
REDIS_COMMANDER_PORT=8081

# =============================================================================
# Feature Flags (Development)
# =============================================================================
ENABLE_API_DOCS=true
ENABLE_GRAPHQL_PLAYGROUND=true
ENABLE_DEBUG_ROUTES=true

# =============================================================================
# Mobile App Configuration (React Native / Expo)
# =============================================================================
EXPO_PUBLIC_API_URL=http://localhost:3000
EXPO_PUBLIC_WS_URL=ws://localhost:3000

# =============================================================================
# Testing Configuration
# =============================================================================
TEST_DATABASE_URL=postgresql://berthcare:berthcare_dev_password@localhost:5432/berthcare_test
TEST_REDIS_URL=redis://:berthcare_redis_password@localhost:6379/1

# =============================================================================
# Monitoring & Observability
# =============================================================================
# Application Version (for release tracking)
APP_VERSION=1.0.0

# Sentry Error Tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# CloudWatch Logging (Production only)
CLOUDWATCH_LOG_GROUP=/berthcare/development/application
CLOUDWATCH_LOG_STREAM=backend

# Logging Configuration
LOG_LEVEL=debug
LOG_FORMAT=json

# =============================================================================
# Email Configuration (Development - Optional)
# =============================================================================
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@berthcare.local
